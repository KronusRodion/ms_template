Этот проект представляет собой gRPC сервер на Go с комплексной инфраструктурой для мониторинга и отладки. Сервер обеспечивает высокопроизводительное межсервисное взаимодействие с полным набором инструментов для эксплуатации в production-среде.

Основные технологии:

gRPC и Protocol Buffers: Сервер использует gRPC поверх HTTP/2 для эффективной коммуникации между сервисами. Интерфейсы определены в proto-файлах, из которых генерируется типобезопасный код на Go. Поддерживаются все типы gRPC-вызовов: унарные, server streaming, client streaming и bidirectional streaming.

Метрики Prometheus: Предоставляет endpoint /metrics с метриками в формате Prometheus. Собираются метрики Go runtime, gRPC-статистика, бизнес-метрики и системные показатели. Endpoint /health используется для health checks в Kubernetes и других оркестраторах.

Структурированное логирование: Логи записываются в JSON-формате в production и в удобочитаемом текстовом формате в development. Каждая запись содержит timestamp, уровень логирования, сообщение и контекстные поля. Поддерживается корреляция логов через trace_id.

Трассировка OpenTelemetry: Реализована распределенная трассировка для отслеживания запросов через несколько сервисов. Трейсы можно экспортировать в Jaeger/Zipkin. Каждый запрос получает уникальный trace_id, который передается между микросервисами.

Graceful Shutdown: Сервер корректно обрабатывает сигналы завершения (SIGINT, SIGTERM). При получении сигнала прекращается прием новых соединений, завершаются текущие запросы (таймаут 30 секунд), после чего закрываются все ресурсы.

Конфигурация: Настройки загружаются из YAML-файла, путь к которому задается через переменную окружения CONF_PATH. Секреты хранятся в отдельных хранилищах. Поддерживаются разные окружения (dev/staging/prod).

Безопасность: Реализована аутентификация через gRPC-интерцепторы. Поддерживается TLS для шифрования трафика. Доступ к метрикам ограничен на уровне сети.

Развертывание: Предоставлен Dockerfile для создания контейнеров. Для оркестрации в Kubernetes есть примеры манифестов. Локальная разработка упрощена через docker-compose с полным стеком зависимостей.

Архитектура: Код организован по принципам Clean Architecture с разделением на слои. Интерфейсы позволяют легко тестировать компоненты и заменять реализации.

Производительность: Сервер предназначен для горизонтального масштабирования. Используется пулинг соединений, кэширование и асинхронная обработка тяжелых операций.

Для запуска установите переменную окружения CONF_PATH и выполните go run cmd/server/main.go. 

